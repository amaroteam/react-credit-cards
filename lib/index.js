!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react"),require("prop-types"),require("payment")):"function"==typeof define&&define.amd?define(["react","prop-types","payment"],r):"object"==typeof exports?exports.ReactCreditCards=r(require("react"),require("prop-types"),require("payment")):e.ReactCreditCards=r(e.react,e["prop-types"],e.payment)}(this,function(e,r,t){return function(e){function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=0)}([function(e,r,t){"use strict";function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function c(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0});var s=t(1),i=t.n(s),o=t(2),u=t.n(o),l=t(3),p=t.n(l),d=t(4),f=(t.n(d),function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}()),m=function(e){function r(e){a(this,r);var t=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={isValid:!1,type:{name:"unknown",maxLength:16}},t.hipercard={type:"hipercard",pattern:/^(3841|606282|637)/,format:/(\d{1,4})/g,length:[16,19],cvcLength:[3],luhn:!0},t.elo={type:"elo",pattern:/^(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)/,format:/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0},t}return c(r,e),f(r,[{key:"componentWillMount",value:function(){this.setCards()}},{key:"componentDidMount",value:function(){var e=this.props.number;this.updateType(e)}},{key:"componentWillReceiveProps",value:function(e){var r=this.props,t=r.acceptedCards,a=r.number,n=e.acceptedCards,c=e.number;a!==c&&this.updateType(c),t.toString()!==n.toString()&&this.setCards(e)}},{key:"setCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=e.acceptedCards,t=[];r.length?(-1!==r.indexOf("hipercard")&&t.push(this.hipercard),-1!==r.indexOf("elo")&&t.push(this.elo),p.a.getCardArray().filter(function(e){return"elo"!==e.type}).forEach(function(e){-1!==r.indexOf(e.type)&&t.push(e)})):(t.push(this.hipercard),t.push(this.elo),t=t.concat(p.a.getCardArray().filter(function(e){return"elo"!==e.type}))),p.a.setCardArray(t),this.cardTypes=p.a.getCardArray()}},{key:"updateType",value:function(e){var r=this.props.callback,t=p.a.fns.cardType(e)||"unknown",a=16;"amex"===t?a=15:"dinersclub"===t?a=14:"hipercard"!==t&&"visa"!==t||(a=19);var n={issuer:t,maxLength:a},c=p.a.fns.validateCardNumber(e);this.setState({isValid:c,type:n}),"function"==typeof r&&r(n,c)}},{key:"formatNumber",value:function(){var e=this.state.type,r=this.props.number,t=e.maxLength,a="number"==typeof r?r.toString():r;for(isNaN(parseInt(r,10))&&(a=""),e.maxLength>16&&(t=a.length<=16?16:e.maxLength),a.length>t&&(a=a.slice(0,t));a.length<t;)a+="•";if(-1!==["amex","dinersclub"].indexOf(e.issuer)){var n=[0,4,10],c=[4,6,5];a=a.substr(n[0],c[0])+" "+a.substr(n[1],c[1])+" "+a.substr(n[2],c[2])}else if(r.length>16){var s=[0,4,8,12],i=[4,7];a=a.substr(s[0],i[0])+" "+a.substr(s[1],i[0])+" "+a.substr(s[2],i[0])+" "+a.substr(s[3],i[1])}else for(var o=1;o<t/4;o++){var u=4*o+(o-1);a=a.slice(0,u)+" "+a.slice(u)}return a}},{key:"formatExpiry",value:function(){var e=this.props.expiry,r=e.toString(),t=r||"••/••";if(r.match(/\//)&&(t=e.replace("/","")),!t.match(/^[0-9]*$/))return"••/••";for(;t.length<4;)t+="•";return t.slice(0,2)+"/"+t.slice(2,6)}},{key:"render",value:function(){var e=this.state.type,r=this.props,t=r.cvc,a=r.focused,n=r.locale,c=r.name,s=r.placeholders,o=this.formatNumber(),u=this.formatExpiry();return i.a.createElement("div",{key:"Cards",className:"rccs"},i.a.createElement("div",{className:["rccs__card","rccs__card--"+e.issuer,"cvc"===a&&"amex"!==e.issuer?"rccs__card--flipped":""].join(" ").trim()},i.a.createElement("div",{className:"rccs__card--front"},i.a.createElement("div",{className:"rccs__card__background"}),i.a.createElement("div",{className:"rccs__issuer"}),i.a.createElement("div",{className:["rccs__cvc__front","cvc"===a?"rccs--focused":""].join(" ").trim()},t),i.a.createElement("div",{className:["rccs__number",o.replace(/ /g,"").length>16?"rccs__number--large":"","number"===a?"rccs--focused":"","•"!==o.substr(0,1)?"rccs--filled":""].join(" ").trim()},o),i.a.createElement("div",{className:["rccs__name","name"===a?"rccs--focused":"",c?"rccs--filled":""].join(" ").trim()},c||s.name),i.a.createElement("div",{className:["rccs__expiry","expiry"===a?"rccs--focused":"","•"!==u.substr(0,1)?"rccs--filled":""].join(" ").trim()},i.a.createElement("div",{className:"rccs__expiry__valid"},n.valid),i.a.createElement("div",{className:"rccs__expiry__value"},u)),i.a.createElement("div",{className:"rccs__chip"})),i.a.createElement("div",{className:"rccs__card--back"},i.a.createElement("div",{className:"rccs__card__background"}),i.a.createElement("div",{className:"rccs__stripe"}),i.a.createElement("div",{className:"rccs__signature"}),i.a.createElement("div",{className:["rccs__cvc","cvc"===a?"rccs--focused":""].join(" ").trim()},t),i.a.createElement("div",{className:"rccs__issuer"}))))}}]),r}(i.a.Component);m.propTypes={acceptedCards:u.a.array,callback:u.a.func,cvc:u.a.oneOfType([u.a.string,u.a.number]).isRequired,expiry:u.a.oneOfType([u.a.string,u.a.number]).isRequired,focused:u.a.string,locale:u.a.shape({valid:u.a.string}),name:u.a.string.isRequired,number:u.a.oneOfType([u.a.string,u.a.number]).isRequired,placeholders:u.a.shape({name:u.a.string})},m.defaultProps={acceptedCards:[],expiry:"",locale:{valid:"valid thru"},placeholders:{name:"YOUR NAME HERE"}},r.default=m},function(e,r){e.exports=require("react")},function(e,r){e.exports=require("prop-types")},function(e,r){e.exports=require("payment")},function(e,r){}])});
//# sourceMappingURL=index.js.map